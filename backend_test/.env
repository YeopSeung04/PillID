MFDS_SERVICE_KEY=1eb6225a4d9e078a0362ab2553f4333be14e95c060e9409dd75ea6bc213d57a3

#cd /d python.exe -m uvicorn app.main:app --host 127.0.0.1 --port 8010 --reload
 #F:\Terminal\envs\PillID\python.exe -m uvicorn app.main:app --host 127.0.0.1 --port 8010 --reload

## 2) 합성 데이터 생성
# python tools\synth_imprint_dataset.py --out tools\out_synth --n 20000 --img 512
# python tools/synth_imprint_dataset.py --out tools/out_synth --n 20000 --img 512

# 생성 결과:
# backend_test/tools/out_synth/
#  images/train/*.jpg
#  labels/train/*.txt
#  images/val/*.jpg
#  labels/val/*.txt
#  dataset.yaml

## 3) YOLO 학습 (문자 검출)
# (A) YOLOv8n 추천 (가벼움/빠름)
# yolo task=detect mode=train model=yolov8n.pt data=tools/out_synth/dataset.yaml imgsz=640 epochs=30 batch=16
# 학습 결과는 보통:
# runs/detect/train/weights/best.pt

## 4) ONNX export
# yolo mode=export model=runs/detect/train/weights/best.pt format=onnx imgsz=640
# 결과
# yolo mode=export model=runs/detect/train/weights/best.pt format=onnx imgsz=640

## 5) backend_test에서 ONNX 연결
# 5-1) 환경변수 설정
# Windows (cmd)
# set IMPRINT_YOLO_ONNX=%CD%\runs\detect\train\weights\best.onnx
# //(영구 저장하려면 setx 쓰면 되는데, 일단은 위 set으로 충분)

# 서버 실행
# uvicorn app.main:app --reload
# 이제 /identify_one에서 YOLO 우선 → 실패 시 OCR fallback으로 동작.